
<div ng-repeat="post in post.pages" class="ng-cloak">
  <div class="col s12 col m10 offset-s1 l8 offset-l2">

    <div class="row">
      <div class="col s12 m10 offset-m1 main-heading animated fadeIn">

        <div ng-if="post.main_image" class="row">
          <div class="col s12 m10 offset-m1">
            <img ng-src="{$ getImage(post.main_image.id) $}" class="responsive-img z-depth-2">
          </div>
        </div>

        <h2 class="center-align">{$ post.title $}</h2>
        <div class="post-meta">
          <div class="valign-wrapper">
              &nbsp;<i class="material-icons">today</i>{$ post.date | date : 'd  MMMM  yyyy' $}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="material-icons">view_list</i>{$ post.categories $}
          </div>
        </div>
      </div>
    </div>

    <div ng-if="post.main_background_image">
      <div class="main-background">
        <img ng-src="{$ getImage(post.main_background_image.id) $}" class="responsive-img .main-background">
      </div>
    </div>

    <div ng-repeat="content in post.content">
      <div ng-if="content.type == 'content'">
        <div class="row content animated fadeIn flow-text ">
            <div class="col s10 offset-s1" ng-bind-html="content.value">
            </div>
        </div>
      </div>

      <div ng-if="content.type == 'code_block'">
        <div class="row code-block animated fadeIn">
          <div class="col s12 m10 offset-m1" ng-bind-html="content.value | unsafe">
          </div>
        </div>
      </div>

      <div ng-if="content.type == 'subheading'">
        <div class="row subheading animated fadeIn flow-text">
          <div class="col s10 offset-s1">
            <h3 ng-bind-html="content.value"></h3>
          </div>
        </div>
      </div>

      <div ng-if="content.type == 'smaller_subheading'">
        <div class="row subheading-smaller animated fadeIn flow-text">
          <div class="col s12 center-align">
            <div ng-bind-html="content.value"></div>
          </div>
        </div>
      </div>

      <div ng-if="content.type == 'subheading_background'">
        <div class="row subheading-background animated fadeIn">
           <img ng-src="{$ getImage(content.value) $}" class="responsive-img">
        </div>
      </div>

      <div ng-if="content.type == 'full_image'" class="center-align">
        <div class="row animated fadeIn">
          <div class="col s12">
            <img ng-src="{$ getImage(content.value) $}" class="responsive-img">
          </div>
        </div>
      </div>
    </div>

    <div ng-repeat="related_post in post.related_post | limitTo : 1">
      <div ng-show="related_post">
        <div class="row subheading-related animated fadeIn flow-text">
          <div class="col s8 offset-s2">
            <h3>Related Posts</h3>
          </div>
        </div>
      </div>
    </div>

    <div class="row related-post">
      <div ng-if="post.related_post" ng-repeat="related_post in post.related_post">
        <ul>
          <div  ng-repeat="posT in posts.pages" class="col s12 m10 offset-m1 flow-text">
            <span ng-if="related_post.value == posT.id">
              <a href="{$ '#/blog/' + slugify(posT.title) $}"><li>{$ posT.title $}</li></a>
            </span>
          </div >
        </ul>
      </div>
    </div>

    <div class="row" id="comments">
      <div disqus=" post.title "></div>
    </div>


  </div>
</div>
